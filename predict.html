<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Conceive Score - Predict</title>

<!-- Attractive font -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&display=swap" rel="stylesheet">

<style>
:root{
  --teal:#2b7a78;
  --teal-dark:#20575a;
  --muted:#6b6f72;
  --card-bg:#ffffff;
  --bg:#f0f4f8;
}
body{
  font-family: 'Montserrat', Arial, sans-serif;
  margin:0;
  background:var(--bg);
  display:flex;
  min-height:100vh;
}

/* Sidebar */
.sidebar{
  height:100vh;
  width:220px;
  background:var(--teal);
  color:white;
  display:flex;
  flex-direction:column;
  padding-top:18px;
  position:fixed;
}
.sidebar h2{ text-align:center; margin:8px 0 10px; font-size:20px; font-weight:700; }
.sidebar p{ text-align:center; margin:6px 8px; font-weight:500; }
.sidebar a{
  padding:10px 14px; text-decoration:none; color:white; display:flex; align-items:center;
  gap:10px; margin:6px; border-radius:8px; font-weight:500;
}
.sidebar a:hover{ background:var(--teal-dark); }

/* Top navbar */
.navbar{
  position:fixed; top:0; left:220px; right:0; height:64px;
  background:var(--teal); display:flex; align-items:center;
  padding:0 18px; color:white; box-shadow:0 2px 6px rgba(0,0,0,0.12); z-index:100;
}
#welcomeMessage { margin-left:auto; margin-right:14px; font-weight:700; font-size:16px; }
.nav-icon{
  margin-left:8px; background:transparent; border:none; color:white; font-size:18px;
  width:44px; height:44px; border-radius:10px; cursor:pointer;
}
.nav-icon:hover{ background:var(--teal-dark); }

/* Main content */
.main-content{ margin-left:220px; padding:22px; flex:1; margin-top:80px; }
h1{ color:var(--teal); text-align:center; margin-bottom:25px; }

/* Form card */
form{
  max-width:650px;
  margin:auto;
  background:var(--card-bg);
  padding:25px 30px;
  border-radius:12px;
  box-shadow:0 6px 18px rgba(0,0,0,0.06);
}
label{ display:block; margin-top:15px; font-weight:600; color:#333; }
input, select{
  width:100%; padding:10px; margin-top:5px;
  border-radius:6px; border:1px solid #ccc;
}
button.submit-btn{
  margin-top:25px; width:100%; padding:14px;
  background-color:var(--teal); color:white;
  border:none; border-radius:10px;
  font-size:16px; font-weight:700;
  cursor:pointer; transition:0.2s;
}
button.submit-btn:hover{ background-color:var(--teal-dark); }

/* responsive */
@media(max-width:900px){
  .navbar{ left:0; }
  .sidebar{ display:none; }
  .main-content{ margin-left:0; margin-top:70px; padding:14px; }
}
</style>
</head>
<body>

<div class="sidebar">
  <h2>Conceive Score</h2>
  <p id="usernameDisplay">Guest</p>
  <a href="dashboard.html"><span>üè†</span> Dashboard</a>
  <a href="predict.html"><span>üìù</span> Make Prediction</a>
  <a href="history.html"><span>üìú</span> Cycle History</a>
  <a href="Tips & Guidelines.html"><span>üí°</span> Tips & Guides</a>
  <a href="settings.html"><span>‚öôÔ∏è</span> Settings</a>
  <a href="coceptionstatus.html"><span>üìä</span> Conception Stats</a>
  <a href="notification.html"><span>üîî</span> Notifications</a>
</div>

<div class="navbar">
  <div style="flex:1"></div>
  <div id="welcomeMessage">Welcome to Conceive Score</div>
  <button class="nav-icon" title="Dashboard" onclick="location.href='dashboard.html'">üè†</button>
  <button class="nav-icon" title="Predict" onclick="location.href='predict.html'">üìù</button>
  <button class="nav-icon" title="History" onclick="location.href='history.html'">üìú</button>
</div>

<div class="main-content">
  <h1>Conception Probability Prediction</h1>

  <form id="predictForm">

    <label>Patient Index</label>
    <input type="number" name="patient_index" id="patient_index" required>

    <label>Age (years)</label><input type="number" name="AGE" required>
    <label>BMI (Body Mass Index)</label><input type="number" name="BMI" required>
    <label>Estradiol (E2) - ‚ÄúEstrogen Level‚Äù</label><input type="number" name="E2" required>
    <label>Progesterone - ‚ÄúLuteal Hormone‚Äù</label><input type="number" name="Progesterone" required>
    <label>LH - ‚ÄúOvulation Trigger Hormone‚Äù</label><input type="number" name="LH" required>
    <label>FSH - ‚ÄúFollicle Stimulating Hormone‚Äù</label><input type="number" name="FSH" required>
    <label>Any Disease (0=No, 1=Yes)</label><input type="number" name="any_disease" required>
    <label>Weight (kg)</label><input type="number" name="Weight_kg" required>
    <label>Height (m)</label><input type="number" name="Height_m" required>
    <label>Workout Type (0=None, 1=Light, 2=Moderate, 3=Heavy)</label><input type="number" name="Workout_Type" required>
    <label>Diet Type (0=Poor,1=Balanced,2=Healthy)</label><input type="number" name="diet_type" required>
    <label>Cycle Number</label><input type="number" name="CycleNumber" required>
    <label>Length of Cycle (days)</label><input type="number" name="LengthofCycle" required>
    <label>Estimated Day of Ovulation</label><input type="number" name="EstimatedDayofOvulation" required>
    <label>Length of Luteal Phase (days)</label><input type="number" name="LengthofLutealPhase" required>
    <label>Total Days of Fertility</label><input type="number" name="TotalDaysofFertility" required>
    <label>Gravida (Number of pregnancies)</label><input type="number" name="Gravida" required>

    <button type="submit" class="submit-btn">Predict</button>
  </form>
</div>

<script>
const name = localStorage.getItem('patient_name') || 'Guest';
document.getElementById('usernameDisplay').textContent = name;
document.getElementById('welcomeMessage').textContent = `Welcome ${name} ‚Äî Conceive Score`;

const patientId = localStorage.getItem('patient_id') || ''; 
document.getElementById('patient_index').value = patientId;

document.getElementById('predictForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const formData = new FormData(e.target);
  const body = Object.fromEntries(formData.entries());

  try {
    const response = await fetch('https://conceive-score-app.onrender.com/predict', {
      method:'POST',
      headers:{ 'Content-Type':'application/json' },
      body: JSON.stringify(body)
    });
    const data = await response.json();
    if(response.ok){
      data.date = new Date().toLocaleDateString();
      localStorage.setItem('last_prediction', JSON.stringify(data));
      let history = JSON.parse(localStorage.getItem('prediction_history') || '[]');
      history.push(data);
      localStorage.setItem('prediction_history', JSON.stringify(history));
      window.location.href='result.html';
    } else {
      alert('Prediction failed: ' + (data.error || 'Unknown error'));
    }
  } catch(err){
    alert('Error connecting to server: ' + err.message);
  }
});
</script>

</body>
</html>
