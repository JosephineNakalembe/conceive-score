<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Conceive Score - Predict</title>
<style>
    body { font-family: Arial, sans-serif; margin: 30px; background: #f0f4f8; }
    h1 { text-align: center; margin-bottom: 30px; }
    .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        max-width: 900px;
        margin: auto;
    }
    label { display: flex; flex-direction: column; margin-bottom: 10px; }
    input, select { padding: 8px; margin-top: 5px; width: 100%; }
    .buttons { text-align: center; margin-top: 30px; }
    button { padding: 10px 20px; margin: 5px; border: none; border-radius: 6px; cursor: pointer; }
    button.predict { background-color: #007BFF; color: white; }
    button.predict:hover { background-color: #0056b3; }
    button.back { background-color: #6c757d; color: white; }
    button.back:hover { background-color: #4a4f54; }
    .result { text-align: center; margin-top: 20px; font-weight: bold; color: green; }
</style>
</head>
<body>

<h1>Conceive Score Predictor</h1>

<div class="form-grid">
    <!-- Basic Info -->
    <label>Age: <input type="number" id="AGE" step="1"></label>
    <label>BMI: <input type="number" id="BMI" step="0.1"></label>

    <!-- Hormonal -->
    <label>E2: <input type="number" id="E2" step="0.01"></label>
    <label>Progesterone: <input type="number" id="Progesterone" step="0.01"></label>
    <label>LH: <input type="number" id="LH" step="0.01"></label>
    <label>FSH: <input type="number" id="FSH" step="0.01"></label>

    <!-- Medical -->
    <label>Any disease? 
        <select id="any_disease">
            <option value="No">No</option>
            <option value="Yes">Yes</option>
        </select>
    </label>

    <!-- Physical -->
    <label>Weight (kg): <input type="number" id="Weight" step="0.1"></label>
    <label>Height (m): <input type="number" id="Height" step="0.01"></label>
    <label>Workout Type:
        <select id="Workout_Type">
            <option value="None">None</option>
            <option value="Light">Light</option>
            <option value="Moderate">Moderate</option>
            <option value="Heavy">Heavy</option>
        </select>
    </label>
    <label>Diet Type:
        <select id="diet_type">
            <option value="Normal">Normal</option>
            <option value="Vegetarian">Vegetarian</option>
            <option value="Vegan">Vegan</option>
            <option value="Keto">Keto</option>
        </select>
    </label>

    <!-- Physiological -->
    <label>Cycle Number: <input type="number" id="CycleNumber" step="1"></label>
    <label>Length of Cycle: <input type="number" id="LengthofCycle" step="1"></label>
    <label>Estimated Day of Ovulation: <input type="number" id="EstimatedDayofOvulation" step="1"></label>
    <label>Length of Luteal Phase: <input type="number" id="LengthofLutealPhase" step="1"></label>
    <label>Total Days of Fertility: <input type="number" id="TotalDaysofFertility" step="1"></label>

    <!-- Prior -->
    <label>Gravida: <input type="number" id="Gravida" step="1"></label>
</div>

<div class="buttons">
    <button class="predict" onclick="predict()">Predict</button>
    <button class="back" onclick="goBack()">Back</button>
</div>

<div class="result" id="result"></div>

<script>
function goBack() {
    window.location.href = "index.html";
}

async function predict() {
    const payload = {
        AGE: parseFloat(document.getElementById('AGE').value),
        BMI: parseFloat(document.getElementById('BMI').value),
        E2: parseFloat(document.getElementById('E2').value),
        Progesterone: parseFloat(document.getElementById('Progesterone').value),
        LH: parseFloat(document.getElementById('LH').value),
        FSH: parseFloat(document.getElementById('FSH').value),
        any_disease: document.getElementById('any_disease').value,
        Weight: parseFloat(document.getElementById('Weight').value),
        Height: parseFloat(document.getElementById('Height').value),
        Workout_Type: document.getElementById('Workout_Type').value,
        diet_type: document.getElementById('diet_type').value,
        CycleNumber: parseInt(document.getElementById('CycleNumber').value),
        LengthofCycle: parseInt(document.getElementById('LengthofCycle').value),
        EstimatedDayofOvulation: parseInt(document.getElementById('EstimatedDayofOvulation').value),
        LengthofLutealPhase: parseInt(document.getElementById('LengthofLutealPhase').value),
        TotalDaysofFertility: parseInt(document.getElementById('TotalDaysofFertility').value),
        Gravida: parseInt(document.getElementById('Gravida').value)
    };

    try {
        const response = await fetch('https://conceive-score-2.onrender.com/predict', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
        });

        if (!response.ok) throw new Error('Backend error');

        const data = await response.json();
        document.getElementById('result').innerText = 
            Predicted Probability of Conception: ${data.probability};
    } catch (err) {
        document.getElementById('result').innerText = Error: ${err.message};
    }
}
</script>

</body>
</html>